@{
    ViewData["Title"] = "UserForgotPassword";
}

@section Scripts {

    <script type="text/javascript">

        let pageIndex = 0;
        
        function rbRecover1_onclick() { 
            document.getElementById("rbRecover1").checked = true;
            document.getElementById("rbRecover2").checked = false;
        }

        function rbRecover2_onclick() {
            document.getElementById("rbRecover1").checked = false;
            document.getElementById("rbRecover2").checked = true;
        }

        function PreviousPage() { 
            if (pageIndex == 3) { 
                pageIndex -= 2;
            }
            else if (pageIndex == 4 && document.getElementById("rbRecover1").checked)
            {
                pageIndex -= 2;
            }
            else if (pageIndex > 0)
                pageIndex--;

            for (let i = 0; i < 6; i++)
                document.getElementById("page" + (i + 1)).hidden = true;

            document.getElementById("page" + (pageIndex + 1)).hidden = false;
        }

        function NextPage() { 
            if (pageIndex == 1 && !document.getElementById("rbRecover1").checked) { 
                pageIndex += 2;
            }
            else if(pageIndex == 2)
            {
                pageIndex += 2;
            }
            else if (pageIndex < 5)
                pageIndex++;

            for (let i = 0; i < 6; i++)
                document.getElementById("page" + (i + 1)).hidden = true;

            document.getElementById("page" + (pageIndex + 1)).hidden = false;
        }
    
    </script>

}

<div align="center">
    <div style="height: 2rem"></div>
    <h3 style="background-color: white; width: fit-content">Forgot Password Wizard</h3>
    <br />

    <div align="center" style="width: 640px; background-color: rgb(50, 50, 50); color: white; border-color: rgb(35, 35, 35); border-style: solid; border-width: 2px">
        <br />
        <div align="center" style="width: 570px">
            <p>
                Welcome to the CMCS Forgot Password Wizard. Please complete all the<br />
                steps to reset your password.
            </p>
        </div>
        <br />
    </div>

    <!-- Step 1 -->
    <div id="page1" style="width: 640px; background-color: white">
        <br />
        <b>Step 1: Enter your User ID:</b><br /><br />
        <b>User ID: </b><input type="text" id="txtUserName" style="width: 200px" /><br /><br />
        <button class="button-class button-class-small2" onclick="NextPage()">Next</button>
        <br />
        <br />
    </div>

    <!-- Step 2 -->
    <div id="page2" style="width: 640px; background-color: white" hidden>
        <br />
        <b>Step 2: Choose a recovery method.</b><br /><br />
        <div style="width: fit-content; text-align: left">
        <input type="radio" id="rbRecover1" onclick="rbRecover1_onclick()" checked />Recover with a recovery file.<br />
        <input type="radio" id="rbRecover2" onclick="rbRecover2_onclick()" />Recover with a security question.
        </div>
        <br />
        <button class="button-class button-class-small2" onclick="PreviousPage()">Previous</button>
        <button class="button-class button-class-small2" onclick="NextPage()">Next</button>
        <br />
        <br />
    </div>

    <!-- Step 3 : Recovery File method -->
    <div id="page3" style="width: 640px; background-color: white" hidden>
        <br />
        <b>Step 3: Upload your recovery file.</b><br />
        <br />
        Recovery File: <button class="button-class button-class-small2">Upload</button><span id="lblRecoveryFileName"></span>
        <br />
        <br />
        <button class="button-class button-class-small2" onclick="PreviousPage()">Previous</button>
        <button class="button-class button-class-small2" onclick="NextPage()">Next</button>
        <br />
        <br />
    </div>

    <!-- Step 3 : Security Question method -->
    <div id="page4" style="width: 640px; background-color: white" hidden>
        <br />
        <b>Step 3: Answer the security question.</b><br /><br />
        <b>Security Question:</b><br />
        <span id="lblSecurityQuestion"></span><br />
        Answer: <input id="txtAnswer" type="text" style="width: 200px" />
        <br />
        <br />
        <button class="button-class button-class-small2" onclick="PreviousPage()">Previous</button>
        <button class="button-class button-class-small2" onclick="NextPage()">Next</button>
        <br />
        <br />
    </div>

    <!-- Step 4 -->
    <div id="page5" style="width: 640px; background-color: white" hidden>
        <br />
        <b>Step 4: Enter your new password.</b><br /><br />

        <table>
            <tr>
                <th>New Password:</th>
                <td><input id="txtPassword" type="password" style="width: 200px" /></td>
            </tr>
            <tr>
                <th>Confirm New Password: </th>
                <td><input id="txtConfirmPassword" type="password" style="width: 200px" /></td>
            </tr>
        </table>
        <br />
        <button class="button-class button-class-small2" onclick="PreviousPage()">Previous</button>
        <button class="button-class button-class-small2" onclick="NextPage()">Next</button>
        <br />
        <br />
    </div>

    <!-- Step 6 -->
    <div id="page6" style="width: 640px; background-color: white" hidden>
        <br />
        <b>Your user account password is now resetted.</b><br /><br />
        <button class="button-class button-class-small">Login Now</button>
        <br />
        <br />
    </div>
</div>